{"ast":null,"code":"import React,{useEffect,useState}from'react';import{adminAPI,superAdminAPI}from'../api/apiService';import{useNavigate}from'react-router-dom';import logo from'../assets/rightlogo.png';import Chart from'chart.js/auto';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Metric=_ref=>{let{label,value,theme='green'}=_ref;const themes={green:{bg:'linear-gradient(135deg, #34d399, #10b981)',text:'#0b3b2e'},blue:{bg:'linear-gradient(135deg, #93c5fd, #3b82f6)',text:'#0b2447'},purple:{bg:'linear-gradient(135deg, #c4b5fd, #8b5cf6)',text:'#2e1065'},yellow:{bg:'linear-gradient(135deg, #fde68a, #f59e0b)',text:'#78350f'},pink:{bg:'linear-gradient(135deg, #fbcfe8, #ec4899)',text:'#831843'}};const t=themes[theme]||themes.green;return/*#__PURE__*/_jsxs(\"div\",{style:{background:t.bg,borderRadius:16,padding:16,boxShadow:'0 6px 20px rgba(0,0,0,0.08)',display:'flex',flexDirection:'column',gap:6,minWidth:180,color:'#fff'},children:[/*#__PURE__*/_jsx(\"div\",{style:{opacity:0.9,fontSize:12,textTransform:'uppercase',letterSpacing:0.6},children:label}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#fff',fontSize:28,fontWeight:800},children:value!==null&&value!==void 0?value:'-'})]});};const AnalyticsDashboard=_ref2=>{var _stats$kycApprovedFar;let{role='SUPER_ADMIN'}=_ref2;const navigate=useNavigate();const[stats,setStats]=useState(null);const[topBottom,setTopBottom]=useState({top:[],bottom:[]});const[modeSplit,setModeSplit]=useState([]);const[error,setError]=useState('');const fetchAll=async()=>{try{setError('');// Counts\n// Use public endpoints for anonymous dashboard\nconst countsResp=await fetch((process.env.REACT_APP_API_URL||'http://localhost:8080/api')+'/public/dashboard/stats',{credentials:'omit'});if(!countsResp.ok)throw new Error('Failed to fetch public stats: '+countsResp.status);const counts=await countsResp.json();setStats(counts);// Build top/bottom district data from public farmers-with-kyc\nconst farmersResp=await fetch((process.env.REACT_APP_API_URL||'http://localhost:8080/api')+'/public/farmers-with-kyc',{credentials:'omit'});if(!farmersResp.ok)throw new Error('Failed to fetch public farmers: '+farmersResp.status);const farmers=await farmersResp.json();const grouped=(farmers||[]).reduce((acc,f)=>{const d=f.district||'Unknown';const status=(f.kycStatus||'').toUpperCase();const g=acc[d]||{total:0,approved:0};g.total+=1;if(status==='APPROVED')g.approved+=1;acc[d]=g;return acc;},{});const rows=Object.entries(grouped).map(_ref3=>{let[district,g]=_ref3;return{district,rate:g.total?Math.round(g.approved/g.total*100):0};});const sorted=rows.sort((a,b)=>b.rate-a.rate);setTopBottom({top:sorted.slice(0,5),bottom:sorted.slice(-5).reverse()});// Enrollment mode split (mock from available data: assigned/not assigned)\nconst mode=[{label:'Assigned',value:(farmers||[]).filter(f=>!!f.assignedEmployee).length},{label:'Unassigned',value:(farmers||[]).filter(f=>!f.assignedEmployee).length}];setModeSplit(mode);}catch(e){var _e$response;console.error(e);setError(((_e$response=e.response)===null||_e$response===void 0?void 0:_e$response.data)||e.message);}};useEffect(()=>{fetchAll();},[]);useEffect(()=>{const id=setInterval(fetchAll,5*60*1000);// 5 minutes\nreturn()=>clearInterval(id);},[]);const renderBar=(canvasId,data,color)=>{const ctx=document.getElementById(canvasId);if(!ctx)return;// destroy existing\nif(ctx._chart){ctx._chart.destroy();}ctx._chart=new Chart(ctx,{type:'bar',data:{labels:data.map(d=>d.district),datasets:[{label:'Approval %',data:data.map(d=>d.rate),backgroundColor:color}]},options:{responsive:true,maintainAspectRatio:false,scales:{y:{beginAtZero:true,max:100,ticks:{callback:v=>v+'%'}}}}});};const renderPie=(canvasId,data)=>{const ctx=document.getElementById(canvasId);if(!ctx)return;if(ctx._chart)ctx._chart.destroy();ctx._chart=new Chart(ctx,{type:'doughnut',data:{labels:data.map(d=>d.label),datasets:[{data:data.map(d=>d.value),backgroundColor:['#22c55e','#fbbf24','#60a5fa','#ef4444','#a78bfa']}]},options:{responsive:true,maintainAspectRatio:false}});};useEffect(()=>{if(topBottom.top.length)renderBar('top5',topBottom.top,'#16a34a');if(topBottom.bottom.length)renderBar('bottom5',topBottom.bottom,'#dc2626');},[topBottom]);useEffect(()=>{if(modeSplit.length)renderPie('modeSplit',modeSplit);},[modeSplit]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,background:'#f3f4f6',minHeight:'100vh'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:10},children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"DATE Logo\",style:{height:36}}),/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,color:'#111827'},children:\"Analytical Dashboard\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:fetchAll,style:{padding:'8px 12px',background:'#10b981',color:'#fff',borderRadius:8,border:'none',cursor:'pointer'},children:\"Refresh\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.history.length>1)navigate(-1);else navigate('/login');},style:{padding:'8px 12px',background:'#374151',color:'#fff',borderRadius:8,border:'none',cursor:'pointer'},children:\"Back\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',marginBottom:8},children:\"Note: Data refreshes every 5 minutes.\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:{background:'#fee2e2',color:'#991b1b',padding:8,borderRadius:8,marginBottom:12},children:error}),/*#__PURE__*/_jsx(\"div\",{style:{height:'2px',background:'linear-gradient(90deg, #e5e7eb, #d1d5db, #e5e7eb)',margin:'20px 0',borderRadius:'1px'}}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',gap:12,margin:'8px 0'},children:/*#__PURE__*/_jsx(\"div\",{style:{padding:'8px 12px',background:'#ecfdf5',color:'#065f46',borderRadius:8,fontWeight:600},children:\"General Counts\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(220px, 1fr))',gap:14},children:[/*#__PURE__*/_jsx(Metric,{theme:\"blue\",label:\"Total Beneficiaries\",value:stats===null||stats===void 0?void 0:stats.totalFarmers}),/*#__PURE__*/_jsx(Metric,{theme:\"purple\",label:\"Total Enrollments\",value:stats===null||stats===void 0?void 0:stats.totalFarmers}),/*#__PURE__*/_jsx(Metric,{theme:\"yellow\",label:\"Enrollment %\",value:stats?`${Math.round((stats.approvedFarmers||0)/(stats.totalFarmers||1)*100)}%`:'-'}),/*#__PURE__*/_jsx(Metric,{theme:\"green\",label:\"Approved IDs\",value:(_stats$kycApprovedFar=stats===null||stats===void 0?void 0:stats.kycApprovedFarmers)!==null&&_stats$kycApprovedFar!==void 0?_stats$kycApprovedFar:stats===null||stats===void 0?void 0:stats.approvedFarmers}),/*#__PURE__*/_jsx(Metric,{theme:\"pink\",label:\"Pending Approvals\",value:stats===null||stats===void 0?void 0:stats.pendingFarmers})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',gap:12,margin:'16px 0 8px'},children:/*#__PURE__*/_jsx(\"div\",{style:{padding:'8px 12px',background:'#eff6ff',color:'#1d4ed8',borderRadius:8,fontWeight:600},children:\"Farmer Enrollment\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:16,marginTop:16},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:12,padding:12,height:320},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"Farmer Enrollment Approval \\u2013 Top 5 Districts\"}),/*#__PURE__*/_jsx(\"canvas\",{id:\"top5\",style:{width:'100%',height:'260px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:12,padding:12,height:320},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"Farmer Enrollment Approval \\u2013 Bottom 5 Districts\"}),/*#__PURE__*/_jsx(\"canvas\",{id:\"bottom5\",style:{width:'100%',height:'260px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderRadius:12,padding:12,height:320,gridColumn:'span 2'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"Enrollment Mode Split\"}),/*#__PURE__*/_jsx(\"canvas\",{id:\"modeSplit\",style:{width:'100%',height:'260px'}})]})]})]});};export default AnalyticsDashboard;","map":{"version":3,"names":["React","useEffect","useState","adminAPI","superAdminAPI","useNavigate","logo","Chart","jsx","_jsx","jsxs","_jsxs","Metric","_ref","label","value","theme","themes","green","bg","text","blue","purple","yellow","pink","t","style","background","borderRadius","padding","boxShadow","display","flexDirection","gap","minWidth","color","children","opacity","fontSize","textTransform","letterSpacing","fontWeight","AnalyticsDashboard","_ref2","_stats$kycApprovedFar","role","navigate","stats","setStats","topBottom","setTopBottom","top","bottom","modeSplit","setModeSplit","error","setError","fetchAll","countsResp","fetch","process","env","REACT_APP_API_URL","credentials","ok","Error","status","counts","json","farmersResp","farmers","grouped","reduce","acc","f","d","district","kycStatus","toUpperCase","g","total","approved","rows","Object","entries","map","_ref3","rate","Math","round","sorted","sort","a","b","slice","reverse","mode","filter","assignedEmployee","length","e","_e$response","console","response","data","message","id","setInterval","clearInterval","renderBar","canvasId","ctx","document","getElementById","_chart","destroy","type","labels","datasets","backgroundColor","options","responsive","maintainAspectRatio","scales","y","beginAtZero","max","ticks","callback","v","renderPie","minHeight","alignItems","justifyContent","marginBottom","src","alt","height","margin","onClick","border","cursor","window","history","gridTemplateColumns","totalFarmers","approvedFarmers","kycApprovedFarmers","pendingFarmers","marginTop","width","gridColumn"],"sources":["C:/karthik cc/Working-frontend/src/pages/AnalyticsDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { adminAPI, superAdminAPI } from '../api/apiService';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport logo from '../assets/rightlogo.png';\r\nimport Chart from 'chart.js/auto';\r\n\r\nconst Metric = ({ label, value, theme = 'green' }) => {\r\n  const themes = {\r\n    green: { bg: 'linear-gradient(135deg, #34d399, #10b981)', text: '#0b3b2e' },\r\n    blue: { bg: 'linear-gradient(135deg, #93c5fd, #3b82f6)', text: '#0b2447' },\r\n    purple: { bg: 'linear-gradient(135deg, #c4b5fd, #8b5cf6)', text: '#2e1065' },\r\n    yellow: { bg: 'linear-gradient(135deg, #fde68a, #f59e0b)', text: '#78350f' },\r\n    pink: { bg: 'linear-gradient(135deg, #fbcfe8, #ec4899)', text: '#831843' }\r\n  };\r\n  const t = themes[theme] || themes.green;\r\n  return (\r\n  <div style={{\r\n    background: t.bg, borderRadius: 16, padding: 16, boxShadow: '0 6px 20px rgba(0,0,0,0.08)',\r\n    display: 'flex', flexDirection: 'column', gap: 6, minWidth: 180, color: '#fff'\r\n  }}>\r\n    <div style={{ opacity: 0.9, fontSize: 12, textTransform: 'uppercase', letterSpacing: 0.6 }}>{label}</div>\r\n    <div style={{ color: '#fff', fontSize: 28, fontWeight: 800 }}>{value ?? '-'}</div>\r\n  </div>\r\n  );\r\n};\r\n\r\nconst AnalyticsDashboard = ({ role = 'SUPER_ADMIN' }) => {\r\n  const navigate = useNavigate();\r\n  const [stats, setStats] = useState(null);\r\n  const [topBottom, setTopBottom] = useState({ top: [], bottom: [] });\r\n  const [modeSplit, setModeSplit] = useState([]);\r\n  const [error, setError] = useState('');\r\n\r\n  const fetchAll = async () => {\r\n    try {\r\n      setError('');\r\n      // Counts\r\n      // Use public endpoints for anonymous dashboard\r\n      const countsResp = await fetch((process.env.REACT_APP_API_URL || 'http://localhost:8080/api') + '/public/dashboard/stats', { credentials: 'omit' });\r\n      if (!countsResp.ok) throw new Error('Failed to fetch public stats: ' + countsResp.status);\r\n      const counts = await countsResp.json();\r\n      setStats(counts);\r\n      // Build top/bottom district data from public farmers-with-kyc\r\n      const farmersResp = await fetch((process.env.REACT_APP_API_URL || 'http://localhost:8080/api') + '/public/farmers-with-kyc', { credentials: 'omit' });\r\n      if (!farmersResp.ok) throw new Error('Failed to fetch public farmers: ' + farmersResp.status);\r\n      const farmers = await farmersResp.json();\r\n      const grouped = (farmers || []).reduce((acc, f) => {\r\n        const d = f.district || 'Unknown';\r\n        const status = (f.kycStatus || '').toUpperCase();\r\n        const g = acc[d] || { total: 0, approved: 0 };\r\n        g.total += 1; if (status === 'APPROVED') g.approved += 1; acc[d] = g; return acc;\r\n      }, {});\r\n      const rows = Object.entries(grouped).map(([district, g]) => ({ district, rate: g.total ? Math.round((g.approved / g.total) * 100) : 0 }));\r\n      const sorted = rows.sort((a, b) => b.rate - a.rate);\r\n      setTopBottom({ top: sorted.slice(0, 5), bottom: sorted.slice(-5).reverse() });\r\n      // Enrollment mode split (mock from available data: assigned/not assigned)\r\n      const mode = [\r\n        { label: 'Assigned', value: (farmers || []).filter(f => !!f.assignedEmployee).length },\r\n        { label: 'Unassigned', value: (farmers || []).filter(f => !f.assignedEmployee).length },\r\n      ];\r\n      setModeSplit(mode);\r\n    } catch (e) {\r\n      console.error(e);\r\n      setError(e.response?.data || e.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => { fetchAll(); }, []);\r\n  useEffect(() => {\r\n    const id = setInterval(fetchAll, 5 * 60 * 1000); // 5 minutes\r\n    return () => clearInterval(id);\r\n  }, []);\r\n\r\n  const renderBar = (canvasId, data, color) => {\r\n    const ctx = document.getElementById(canvasId);\r\n    if (!ctx) return;\r\n    // destroy existing\r\n    if (ctx._chart) { ctx._chart.destroy(); }\r\n    ctx._chart = new Chart(ctx, {\r\n      type: 'bar',\r\n      data: {\r\n        labels: data.map(d => d.district),\r\n        datasets: [{ label: 'Approval %', data: data.map(d => d.rate), backgroundColor: color }]\r\n      },\r\n      options: {\r\n        responsive: true, maintainAspectRatio: false,\r\n        scales: { y: { beginAtZero: true, max: 100, ticks: { callback: v => v + '%' } } }\r\n      }\r\n    });\r\n  };\r\n\r\n  const renderPie = (canvasId, data) => {\r\n    const ctx = document.getElementById(canvasId);\r\n    if (!ctx) return;\r\n    if (ctx._chart) ctx._chart.destroy();\r\n    ctx._chart = new Chart(ctx, {\r\n      type: 'doughnut',\r\n      data: {\r\n        labels: data.map(d => d.label),\r\n        datasets: [{ data: data.map(d => d.value), backgroundColor: ['#22c55e', '#fbbf24', '#60a5fa', '#ef4444', '#a78bfa'] }]\r\n      },\r\n      options: { responsive: true, maintainAspectRatio: false }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (topBottom.top.length) renderBar('top5', topBottom.top, '#16a34a');\r\n    if (topBottom.bottom.length) renderBar('bottom5', topBottom.bottom, '#dc2626');\r\n  }, [topBottom]);\r\n\r\n  useEffect(() => { if (modeSplit.length) renderPie('modeSplit', modeSplit); }, [modeSplit]);\r\n\r\n  return (\r\n    <div style={{ padding: 20, background: '#f3f4f6', minHeight: '100vh' }}>\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: 12 }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: 10 }}>\r\n          <img src={logo} alt=\"DATE Logo\" style={{ height: 36 }} />\r\n          <h2 style={{ margin: 0, color: '#111827' }}>Analytical Dashboard</h2>\r\n        </div>\r\n        <div style={{ display: 'flex', gap: 8 }}>\r\n          <button\r\n            onClick={fetchAll}\r\n            style={{ padding: '8px 12px', background: '#10b981', color: '#fff', borderRadius: 8, border: 'none', cursor: 'pointer' }}\r\n          >Refresh</button>\r\n          <button\r\n            onClick={() => { if (window.history.length > 1) navigate(-1); else navigate('/login'); }}\r\n            style={{ padding: '8px 12px', background: '#374151', color: '#fff', borderRadius: 8, border: 'none', cursor: 'pointer' }}\r\n          >Back</button>\r\n        </div>\r\n      </div>\r\n      <div style={{ color: '#6b7280', marginBottom: 8 }}>Note: Data refreshes every 5 minutes.</div>\r\n      {error && <div style={{ background: '#fee2e2', color: '#991b1b', padding: 8, borderRadius: 8, marginBottom: 12 }}>{error}</div>}\r\n\r\n      {/* Full-width line below header */}\r\n      <div style={{ \r\n        height: '2px', \r\n        background: 'linear-gradient(90deg, #e5e7eb, #d1d5db, #e5e7eb)', \r\n        margin: '20px 0', \r\n        borderRadius: '1px' \r\n      }}></div>\r\n\r\n      {/* Section: General Counts */}\r\n      <div style={{ display: 'flex', alignItems: 'center', gap: 12, margin: '8px 0' }}>\r\n        <div style={{ padding: '8px 12px', background: '#ecfdf5', color: '#065f46', borderRadius: 8, fontWeight: 600 }}>General Counts</div>\r\n      </div>\r\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(220px, 1fr))', gap: 14 }}>\r\n        <Metric theme=\"blue\" label=\"Total Beneficiaries\" value={stats?.totalFarmers} />\r\n        <Metric theme=\"purple\" label=\"Total Enrollments\" value={stats?.totalFarmers} />\r\n        <Metric theme=\"yellow\" label=\"Enrollment %\" value={stats ? `${Math.round(((stats.approvedFarmers || 0) / (stats.totalFarmers || 1)) * 100)}%` : '-'} />\r\n        <Metric theme=\"green\" label=\"Approved IDs\" value={stats?.kycApprovedFarmers ?? stats?.approvedFarmers} />\r\n        <Metric theme=\"pink\" label=\"Pending Approvals\" value={stats?.pendingFarmers} />\r\n      </div>\r\n\r\n      {/* Section: Farmer Enrollment */}\r\n      <div style={{ display: 'flex', alignItems: 'center', gap: 12, margin: '16px 0 8px' }}>\r\n        <div style={{ padding: '8px 12px', background: '#eff6ff', color: '#1d4ed8', borderRadius: 8, fontWeight: 600 }}>Farmer Enrollment</div>\r\n      </div>\r\n      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 16, marginTop: 16 }}>\r\n        <div style={{ background: '#fff', borderRadius: 12, padding: 12, height: 320 }}>\r\n          <div style={{ fontWeight: 600, marginBottom: 8 }}>Farmer Enrollment Approval – Top 5 Districts</div>\r\n          <canvas id=\"top5\" style={{ width: '100%', height: '260px' }} />\r\n        </div>\r\n        <div style={{ background: '#fff', borderRadius: 12, padding: 12, height: 320 }}>\r\n          <div style={{ fontWeight: 600, marginBottom: 8 }}>Farmer Enrollment Approval – Bottom 5 Districts</div>\r\n          <canvas id=\"bottom5\" style={{ width: '100%', height: '260px' }} />\r\n        </div>\r\n        <div style={{ background: '#fff', borderRadius: 12, padding: 12, height: 320, gridColumn: 'span 2' }}>\r\n          <div style={{ fontWeight: 600, marginBottom: 8 }}>Enrollment Mode Split</div>\r\n          <canvas id=\"modeSplit\" style={{ width: '100%', height: '260px' }} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnalyticsDashboard;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}